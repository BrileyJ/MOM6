<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MOM6: /glade/work/altuntas/doxygen/MOM6/src/tracer/MOM_offline_main.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MOM6
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('MOM__offline__main_8F90.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#namespaces">Modules</a>  </div>
  <div class="headertitle">
<div class="title">MOM_offline_main.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;MOM_memory.h&quot;</code><br />
<code>#include &quot;<a class="el" href="version__variable_8h_source.html">version_variable.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for MOM_offline_main.F90:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="MOM__offline__main_8F90__incl.svg" width="299" height="142"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="MOM__offline__main_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmom__offline__main_1_1offline__transport__cs.html">mom_offline_main::offline_transport_cs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The control structure for the offline transport module.  <a href="structmom__offline__main_1_1offline__transport__cs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Modules</h2></td></tr>
<tr class="memitem:namespacemom__offline__main"><td class="memItemLeft" align="right" valign="top">module &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html">mom_offline_main</a></td></tr>
<tr class="memdesc:namespacemom__offline__main"><td class="mdescLeft">&#160;</td><td class="mdescRight">The routines here implement the offline tracer algorithm used in MOM6. These are called from step_offline Some routines called here can be found in the MOM_offline_aux module. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:ae85546d26ceb447742abe3c528cad2d7"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#ae85546d26ceb447742abe3c528cad2d7">mom_offline_main::offline_advection_ale</a> (fluxes, Time_start, time_interval, CS, id_clock_ale, h_pre, uhtr, vhtr, converged)</td></tr>
<tr class="memdesc:ae85546d26ceb447742abe3c528cad2d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">3D advection is done by doing flux-limited nonlinear horizontal advection interspersed with an ALE regridding/remapping step. The loop in this routine is exited if remaining residual transports are below a runtime-specified value or a maximum number of iterations is reached.  <a href="namespacemom__offline__main.html#ae85546d26ceb447742abe3c528cad2d7">More...</a><br /></td></tr>
<tr class="separator:ae85546d26ceb447742abe3c528cad2d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a312c47e83e64a6bdf064526f77a8a8ec"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#a312c47e83e64a6bdf064526f77a8a8ec">mom_offline_main::offline_redistribute_residual</a> (CS, h_pre, uhtr, vhtr, converged)</td></tr>
<tr class="memdesc:a312c47e83e64a6bdf064526f77a8a8ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">In the case where the main advection routine did not converge, something needs to be done with the remaining transport. Two different ways are offered, 'barotropic' means that the residual is distributed equally throughout the water column. 'upwards' attempts to redistribute the transport in the layers above and will eventually work down the entire water column.  <a href="namespacemom__offline__main.html#a312c47e83e64a6bdf064526f77a8a8ec">More...</a><br /></td></tr>
<tr class="separator:a312c47e83e64a6bdf064526f77a8a8ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713ee3448313842b0f07a5a750a01c60"><td class="memItemLeft" align="right" valign="top">real function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#a713ee3448313842b0f07a5a750a01c60">mom_offline_main::remaining_transport_sum</a> (CS, uhtr, vhtr)</td></tr>
<tr class="memdesc:a713ee3448313842b0f07a5a750a01c60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sums any non-negligible remaining transport to check for advection convergence.  <a href="namespacemom__offline__main.html#a713ee3448313842b0f07a5a750a01c60">More...</a><br /></td></tr>
<tr class="separator:a713ee3448313842b0f07a5a750a01c60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef35c02f93931567c41ae8bc0544bdd"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#aaef35c02f93931567c41ae8bc0544bdd">mom_offline_main::offline_diabatic_ale</a> (fluxes, Time_start, Time_end, CS, h_pre, eatr, ebtr)</td></tr>
<tr class="memdesc:aaef35c02f93931567c41ae8bc0544bdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The vertical/diabatic driver for offline tracers. First the eatr/ebtr associated with the interpolated vertical diffusivities are calculated and then any tracer column functions are done which can include vertical diffuvities and source/sink terms.  <a href="namespacemom__offline__main.html#aaef35c02f93931567c41ae8bc0544bdd">More...</a><br /></td></tr>
<tr class="separator:aaef35c02f93931567c41ae8bc0544bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04d329761570d6d9fbc38589bea929cc"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#a04d329761570d6d9fbc38589bea929cc">mom_offline_main::offline_fw_fluxes_into_ocean</a> (G, GV, CS, fluxes, h, in_flux_optional)</td></tr>
<tr class="memdesc:a04d329761570d6d9fbc38589bea929cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply positive freshwater fluxes (into the ocean) and update netMassOut with only the negative (out of the ocean) fluxes.  <a href="namespacemom__offline__main.html#a04d329761570d6d9fbc38589bea929cc">More...</a><br /></td></tr>
<tr class="separator:a04d329761570d6d9fbc38589bea929cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad96c09ff7c8f34d9602fd111ec492cfe"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#ad96c09ff7c8f34d9602fd111ec492cfe">mom_offline_main::offline_fw_fluxes_out_ocean</a> (G, GV, CS, fluxes, h, out_flux_optional)</td></tr>
<tr class="memdesc:ad96c09ff7c8f34d9602fd111ec492cfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply negative freshwater fluxes (out of the ocean)  <a href="namespacemom__offline__main.html#ad96c09ff7c8f34d9602fd111ec492cfe">More...</a><br /></td></tr>
<tr class="separator:ad96c09ff7c8f34d9602fd111ec492cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887d59c64eb269aad257eacc8cf30444"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#a887d59c64eb269aad257eacc8cf30444">mom_offline_main::offline_advection_layer</a> (fluxes, Time_start, time_interval, CS, h_pre, eatr, ebtr, uhtr, vhtr)</td></tr>
<tr class="memdesc:a887d59c64eb269aad257eacc8cf30444"><td class="mdescLeft">&#160;</td><td class="mdescRight">When in layer mode, 3D horizontal advection using stored mass fluxes must be used. Horizontal advection is done via tracer_advect, whereas the vertical component is actually handled by vertdiff in tracer_column_fns.  <a href="namespacemom__offline__main.html#a887d59c64eb269aad257eacc8cf30444">More...</a><br /></td></tr>
<tr class="separator:a887d59c64eb269aad257eacc8cf30444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e59b996b88713928c04f72d57c5a531"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#a2e59b996b88713928c04f72d57c5a531">mom_offline_main::update_offline_fields</a> (CS, h, fluxes, do_ale)</td></tr>
<tr class="memdesc:a2e59b996b88713928c04f72d57c5a531"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update fields used in this round of offline transport. First fields are updated from files or from arrays read during initialization. Then if in an ALE-dependent coordinate, regrid/remap fields.  <a href="namespacemom__offline__main.html#a2e59b996b88713928c04f72d57c5a531">More...</a><br /></td></tr>
<tr class="separator:a2e59b996b88713928c04f72d57c5a531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0adf88ec8f84684573c1bafd91b22cf6"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#a0adf88ec8f84684573c1bafd91b22cf6">mom_offline_main::register_diags_offline_transport</a> (Time, diag, CS)</td></tr>
<tr class="memdesc:a0adf88ec8f84684573c1bafd91b22cf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize additional diagnostics required for offline tracer transport.  <a href="namespacemom__offline__main.html#a0adf88ec8f84684573c1bafd91b22cf6">More...</a><br /></td></tr>
<tr class="separator:a0adf88ec8f84684573c1bafd91b22cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad773f8f414f53f000cab30ad097aeaab"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#ad773f8f414f53f000cab30ad097aeaab">mom_offline_main::post_offline_convergence_diags</a> (CS, h_off, h_end, uhtr, vhtr)</td></tr>
<tr class="memdesc:ad773f8f414f53f000cab30ad097aeaab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Posts diagnostics related to offline convergence diagnostics.  <a href="namespacemom__offline__main.html#ad773f8f414f53f000cab30ad097aeaab">More...</a><br /></td></tr>
<tr class="separator:ad773f8f414f53f000cab30ad097aeaab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92877b75e72069b97573d2643a919106"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#a92877b75e72069b97573d2643a919106">mom_offline_main::extract_offline_main</a> (CS, uhtr, vhtr, eatr, ebtr, h_end, accumulated_time, dt_offline, dt_offline_vertical, skip_diffusion)</td></tr>
<tr class="memdesc:a92877b75e72069b97573d2643a919106"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracts members of the offline main control structure. All arguments are optional except the control structure itself.  <a href="namespacemom__offline__main.html#a92877b75e72069b97573d2643a919106">More...</a><br /></td></tr>
<tr class="separator:a92877b75e72069b97573d2643a919106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadf3150c45b59adac6e70933971e6f8a"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#aadf3150c45b59adac6e70933971e6f8a">mom_offline_main::insert_offline_main</a> (CS, ALE_CSp, diabatic_CSp, diag, OBC, tracer_adv_CSp, tracer_flow_CSp, tracer_Reg, tv, G, GV, x_before_y, debug)</td></tr>
<tr class="memdesc:aadf3150c45b59adac6e70933971e6f8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts (assigns values to) members of the offline main control structure. All arguments are optional except for the CS itself.  <a href="namespacemom__offline__main.html#aadf3150c45b59adac6e70933971e6f8a">More...</a><br /></td></tr>
<tr class="separator:aadf3150c45b59adac6e70933971e6f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3948771c2f4a319e66db28fe866e1549"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#a3948771c2f4a319e66db28fe866e1549">mom_offline_main::offline_transport_init</a> (param_file, CS, diabatic_CSp, G, GV)</td></tr>
<tr class="memdesc:a3948771c2f4a319e66db28fe866e1549"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the control structure for offline transport and reads in some of the.  <a href="namespacemom__offline__main.html#a3948771c2f4a319e66db28fe866e1549">More...</a><br /></td></tr>
<tr class="separator:a3948771c2f4a319e66db28fe866e1549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc6fd7e877d8e70014cbad2d4e3f11c5"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#abc6fd7e877d8e70014cbad2d4e3f11c5">mom_offline_main::read_all_input</a> (CS)</td></tr>
<tr class="memdesc:abc6fd7e877d8e70014cbad2d4e3f11c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinates the allocation and reading in all time levels of uh, vh, hend, temp, and salt from files. Used when read_all_ts_uvh.  <a href="namespacemom__offline__main.html#abc6fd7e877d8e70014cbad2d4e3f11c5">More...</a><br /></td></tr>
<tr class="separator:abc6fd7e877d8e70014cbad2d4e3f11c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853e9fbade83984621d26f51c1a2d651"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__offline__main.html#a853e9fbade83984621d26f51c1a2d651">mom_offline_main::offline_transport_end</a> (CS)</td></tr>
<tr class="memdesc:a853e9fbade83984621d26f51c1a2d651"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocates (if necessary) arrays within the offline control structure.  <a href="namespacemom__offline__main.html#a853e9fbade83984621d26f51c1a2d651">More...</a><br /></td></tr>
<tr class="separator:a853e9fbade83984621d26f51c1a2d651"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_419569bb6464a79f27b27102966d14b7.html">tracer</a></li><li class="navelem"><a class="el" href="MOM__offline__main_8F90.html">MOM_offline_main.F90</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
